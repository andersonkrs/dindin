<% content_for :title, "Transactions" %>

<div class="index-card">
  <div class="index-card-body">
    <div class="index-card-title py-5">Transactions</div>

    <div class="index-card-actions">
      <%= link_to new_expense_path, role: "button", class: "btn-action text-indigo-400 hover:bg-indigo-500 hover:text-white hover:border-indigo-500" do %>
        <%= icon "plus", class: "stroke-3" %>
        New
      <% end %>
    </div>

    <div class="flex flex-col w-full pt-0 px-1 md:px-3">

      <% cache @transactions do %>
        <% @transactions.group_by(&:due_on).each do |date, transactions| %>
          <div class="mx-1 py-2 flex items-center text-sm font-semibold text-gray-500"><%= I18n.l date, format: :long %></div>
          <% transactions.each do |transaction| %>
            <% cache transaction do %>
              <%= render "transactions/transaction", transaction: transaction %>
           <% end %>
          <% end %>
        <% end %>
      <% end %>

    </div>
  </div>
</div>
