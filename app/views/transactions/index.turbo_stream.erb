<%= turbo_stream.append dom_id(Transaction, :list) do %>
  <% cache @page.records do %>
    <% @page.records.group_by(&:due_on).each do |date, transactions| %>
      <%= transactions_date_divider(date) %>
      <%= render partial: "transaction", collection: transactions %>
    <% end %>
  <% end %>
<% end %>

<%= turbo_stream.replace dom_id(Transaction, :load_more) do %>
  <% if @page.before_last? %>
    <%= turbo_frame_tag dom_id(Transaction, :load_more), class: "loading loading-spinner loading-lg m-auto", src: transactions_path(page: @page.next_param, format: :turbo_stream), loading: :lazy %>
  <% end %>
<% end %>
